<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>xTiber – Stats</title>
  <link rel="icon" href="./img/favicon-16x16.png" type="image/png">

  <!-- Global CSS (samme som bayes.html) -->
  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/layout.css">
  <link rel="stylesheet" href="./css/components.css">
  <link rel="stylesheet" href="./css/utilities.css">

  <!-- Vue 3 (CDN) -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

  <style>[v-cloak]{display:none}</style>
</head>
<body>
<div id="app" class="wrap" v-cloak>
    <h1>{{ hypJson.title }}</h1>
    <p class="lead">{{ hypJson.intro }}</p>

    <!-- Topp: apriori + posterior (fra average.json) -->
    <div class="card heading">
      <div class="row-fixed">
        <div>
          <label>Gjennomsnittlig "gut feeling"</label>
          <div class="posterior" :class="backgroundClass(aprioriPct)">{{ fmtPct(aprioriPct) }}</div>
        </div>
        <div>
          <label>Resultat (posterior)</label>
          <div class="posterior" :class="backgroundClass(posteriorPct)">{{ fmtPct(posteriorPct) }}</div>
        </div>
        <div class="right">
          <button class="btn" @click="copyJson">Kopier JSON</button>
        </div>
      </div>
    </div>

    <!-- Tabell (som i resultsDialog) -->
    <div class="card">
      <div class="row" style="justify-content:space-between; margin-bottom:6px">
        <strong>Evidences ({{ hypJson.evidence?.length ?? 0 }})</strong>
        <span class="hint">Kilde: data/{{ hypSlug }}/average.json</span>
      </div>

      <table class="table">
        <thead>
        <tr>
          <th>Evidence</th>
          <th>P(E|H)</th>
          <th>P(E|¬H)</th>
          <th>Weight</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="(ev, idx) in hypJson.evidence" :key="ev.id ?? idx" :class="backgroundClassEv(idx)">
          <td>{{ ev.label || ev.short || ('E' + (ev.id ?? (idx+1))) }}</td>
          <td class="num">{{ fmtPct(ev.pehPct) }}</td>
          <td class="num">{{ fmtPct(ev.penhPct) }}</td>
          <td class="num">{{ ev.weight }}</td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Referanser (valgfritt) -->
    <details class="details-block" v-if="hasAnyReferences" style="margin-top:10px;">
      <summary class="btn small">Vis alle referanser</summary>
      <ul style="margin-top:8px;">
        <li v-for="(ref, i) in allReferences" :key="'ref-'+i">
          <a :href="extractUrl(ref)" target="_blank" rel="noopener">{{ ref }}</a>
        </li>
      </ul>
    </details>
</div>

<!-- App-kode -->
<script type="module" src="./js/stats.js"></script>
</body>
</html>
